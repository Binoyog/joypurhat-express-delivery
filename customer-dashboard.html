<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<title>Products</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:Segoe UI;background:#f2f4f7;margin:0;padding:10px}
.card{
  background:#fff;border-radius:10px;
  padding:10px;margin-bottom:10px;
}
img{width:100%;border-radius:10px}
</style>
</head>
<body>

<div id="list"></div>

<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
import { getFirestore,collection,getDocs,query,where } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-firestore.js";

const firebaseConfig = {
  apiKey: "AIzaSyCiKuc8l-6RTZWf5FwUMEbUuMiMUUQ3lYM",
  authDomain: "joypurhat-express-delivery.firebaseapp.com",
  projectId: "joypurhat-express-delivery"
};

const app=initializeApp(firebaseConfig);
const db=getFirestore(app);

const cat=new URLSearchParams(location.search).get("cat");

const q=query(collection(db,"products"),
  where("categoryId","==",cat),
  where("isAvailable","==",true)
);

const snap=await getDocs(q);
snap.forEach(d=>{
  const p=d.data();
  list.innerHTML+=`
    <div class="card">
      <img src="${p.image}">
      <h3>${p.productName}</h3>
      <p>à§³ ${p.price}</p>
    </div>
  `;
});
</script>

</body>
</html>
